<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}DesignPS - Студия дизайна{% endblock %}</title>
    <link rel="stylesheet" href="/static/css/base.css">
    {% block extra_css %}{% endblock %}
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
</head>
<body>
    <!-- Шапка -->
    <header>
        <div class="container header-inner">
            <a href="/" class="logo">Design<span>PS</span></a>
            <nav>
                <ul>
                    <li><a href="#services">Услуги</a></li>
                    <li><a href="#portfolio">Портфолио</a></li>
                    <li><a href="#about">О нас</a></li>
                    <li><a href="#contact">Контакты</a></li>
                    {% if admin %}
                    <li><a href="/admin">Админ</a></li>
                    {% endif %}
                </ul>
            </nav>
        </div>
    </header>

    <!-- Flash-сообщения -->
    {% if request.cookies.get('flash_message') %}
    <div class="flash-{{ request.cookies.get('flash_type', 'success') }}">
        {{ request.cookies.get('flash_message') | urldecode }}
    </div>
    {% endif %}

    <!-- Основное содержимое -->
    <main>
        {% block content %}{% endblock %}
    </main>

    {% block scripts %}
    <script>
    // Автоматическое скрытие flash-сообщений
    document.addEventListener('DOMContentLoaded', function() {
        const flash = document.querySelector('.flash-success, .flash-error');
        if (flash) {
            setTimeout(() => {
                flash.style.opacity = '0';
                setTimeout(() => flash.remove(), 300);
            }, 3000);
        }
        
        // Плавная прокрутка для якорных ссылок
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    window.scrollTo({
                        top: target.offsetTop - 80,
                        behavior: 'smooth'
                    });
                }
            });
        });
    });
    </script>
    {% endblock %}
</body>
</html>